# ============================================================================
# Base Application Configuration
# ============================================================================
app:
  admin-key: ${APP_ADMIN_KEY:demo-secret-key}
  retry:
    max-attempts: 3
    backoff-seconds: 2
  prompts:
    standard: "You are an AI assistant with a very specific and strict set of rules. You MUST follow these rules without exception. RULE 1: Your primary function is to answer questions based *only* on the text provided in the KNOWLEDGE BASE. RULE 2: If the answer is in the KNOWLEDGE BASE, you must provide it. RULE 3: If the answer is NOT in the KNOWLEDGE BASE, you are forbidden from using any other knowledge and MUST reply with the exact phrase: 'I'm sorry, I don't have that information.' RULE 4: You are an information-retrieval bot, NOT a calculator or a task-doer. If the user asks you to perform a calculation (like math), book something, or any other action, you MUST politely refuse and state that you can only answer questions based on the provided text. For example, say 'I cannot perform calculations, but I can tell you that the policy for overtime is...' RULE 5: You must not refer to yourself as an AI or mention the 'KNOWLEDGE BASE' in your responses."
    fallback: "You are 'AI Assistant', a helpful customer support agent. You have been asked a question for which you have NO information in your knowledge base. Your task is to be helpful and manage the user's expectations without making up an answer. Politely state that you don't have the specific information they are looking for. If appropriate, suggest a more general topic they could ask about, or apologize for the inconvenience. DO NOT invent an answer. Example: 'I'm sorry, I don't have specific details about that. I can answer questions about topics like membership, billing, and facility hours.'"

spring:
  application:
    name: ai-assistant-platform
  main:
    banner-mode: "off"
  jackson:
    default-property-inclusion: non_null
  sql:
    init:
      mode: never
  codec:
    max-in-memory-size: 10MB
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 10MB
  datasource:
    url: ${DATABASE_URL:jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
    driverClassName: ${DATABASE_DRIVER:org.h2.Driver}
    username: ${DATABASE_USERNAME:sa}
    password: ${DATABASE_PASSWORD:}
  jpa:
    database-platform: ${DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}
    hibernate:
      ddl-auto: none

flyway:
  enabled: true
  baseline-on-migrate: true

server:
  port: ${PORT:8080}

# --- MODEL ADAPTER CONFIGURATION ---
model:
  adapter: ${MODEL_ADAPTER:remote}
  remote:
    chat:
      provider: openai
      endpoint: https://openrouter.ai/api/v1/chat/completions
      key: ${REMOTE_CHAT_KEY}
      model: openai/gpt-4o-mini

    embedding:
      provider: openai
      endpoint: https://openrouter.ai/api/v1/embeddings
      key: ${REMOTE_EMBEDDING_KEY}
      model: sentence-transformers/multi-qa-mpnet-base-dot-v1

# Retrieval Configuration
retrieval:
  top-k: 15
  min-similarity-threshold: 0.5

# Cache Configuration
cache:
  ttl-seconds: 60

# Logging
logging:
  level:
    root: INFO
    com.aiassistant: DEBUG
    org.springframework.web: INFO
    org.hibernate.SQL: DEBUG
